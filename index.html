<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>LifeTrack Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{
      --accent-color:#667eea;
      --bg:#f8fafc;
      --card-border:#e5e7eb;
      --text:#111827;
      --muted:#6b7280;
      --font-family: "Segoe UI", Roboto, system-ui, -apple-system, sans-serif;
      --font-size:16px;
      --brightness:1;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font-family);
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      font-size:var(--font-size);
      filter:brightness(var(--brightness));
    }
    .container{ max-width:380px; margin:18px auto; padding:12px; }
    .topbar{
      display:flex; align-items:center; gap:8px; justify-content:space-between;
      margin-bottom:12px;
    }
    .settings-icon{
      width:42px; height:42px; border-radius:10px; display:flex; align-items:center; justify-content:center;
      background:#fff; border:1.5px solid var(--card-border); cursor:pointer; box-shadow:0 6px 18px rgba(2,6,23,0.06);
    }
    .header{
      flex:1; background:linear-gradient(135deg,var(--accent-color),#764ba2);
      color:#fff; padding:16px; border-radius:12px; text-align:center; margin-left:6px;
      box-shadow:0 10px 30px rgba(16,24,40,0.12);
    }
    .header h1{ margin:0; font-size:24px; font-weight:800; letter-spacing:0.2px; }
    .header p{ margin:6px 0 0; color:rgba(255,255,255,0.95); font-weight:600; font-size:14px; }
    .quick-actions{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; margin:18px 0; }
    .action-card{
      background:#fff; border-radius:12px; padding:16px; display:flex; align-items:center;
      justify-content:center; text-align:center; min-height:86px; cursor:pointer; border:1.5px solid var(--card-border);
      box-shadow:0 8px 22px rgba(2,6,23,0.06); transition:transform .08s ease, box-shadow .08s ease; font-weight:700; color:var(--text);
    }
    .action-card:hover{ transform:translateY(-3px); box-shadow:0 14px 36px rgba(2,6,23,0.10); }
    .screen{ display:none; background:#fff; padding:14px; border-radius:12px; border:2px solid #e6e9f2;
      box-shadow:0 8px 24px rgba(2,6,23,0.06); margin-bottom:14px; text-align:center; }
    .visible{ display:block; }
    h3{ margin:8px 0 12px; font-size:18px; }
    .sub-label{ color:var(--muted); font-size:13px; margin-bottom:8px; }
    .todo-item{ display:flex; justify-content:space-between; align-items:center; border-radius:8px; padding:8px; border:1px solid var(--card-border); margin:8px 0; }
    .todo-item button{ background:#ef4444; color:#fff; border:none; padding:6px 10px; border-radius:8px; cursor:pointer; }
    .summary{ display:flex; gap:10px; justify-content:center; margin-top:8px; flex-wrap:wrap; }
    .summary .stat{ background:#f3f4f6; padding:8px 12px; border-radius:8px; font-weight:700; color:var(--text); }
    .muted{ color:var(--muted); font-size:13px; }
    #tipsContainer { text-align:left; display:none; max-height:260px; overflow:auto; border:1px solid var(--card-border); padding:8px; border-radius:8px; margin-top:10px; background:#fff; }
    canvas{ max-width:100%; margin-top:10px; }
    .btn{ width:100%; max-width:320px; padding:12px 14px; border-radius:12px; border:none; background:var(--accent-color); color:#fff; font-weight:700; cursor:pointer; box-shadow:0 8px 22px rgba(102,126,234,0.18); margin:6px auto; }
    input[type="text"], input[type="number"]{ width:100%; max-width:320px; padding:10px; border-radius:10px; border:1.5px solid var(--card-border); font-size:15px; margin:6px auto; }
  </style>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div class="settings-icon" id="settingsIcon">‚öô</div>
      <div class="header">
        <h1>LifeTrack Dashboard</h1>
        <p>Welcome User</p>
      </div>
    </div>

    <div class="quick-actions" id="actionGrid">
      <div class="action-card" onclick="showScreen('meals')">üçΩ Meal Tracking</div>
    </div>

    <div class="screen" id="meals">
      <h3>Meal Tracking</h3>
      <p class="sub-label">Add meals with calories and portion (ml or g). Daily totals and recent entries shown below.</p>
      <input id="mealName" type="text" placeholder="Meal name (e.g., Breakfast - Oats)"/>
      <input id="mealPortion" type="number" placeholder="Portion (ml or g)"/>
      <input id="mealCalories" type="number" placeholder="Calories (kcal)"/>
      <button class="btn" onclick="addMeal()">Add meal</button>

      <div class="summary" style="margin-top:12px;">
        <div class="stat">Today kcal: <span id="todayCalories">0</span></div>
        <div class="stat">Today portions: <span id="todayPortions">0</span></div>
      </div>

      <p class="muted">Recent entries</p>
      <div id="mealList"></div>

      <p class="muted" style="margin-top:12px;">Healthy eating tips (tap again to close)</p>
      <button class="btn" onclick="toggleTips()">Show/Hide 50 Healthy Food Tips</button>
      <div id="tipsContainer"></div>

      <canvas id="mealsChart" width="320" height="160"></canvas>
    </div>
  </div>

  <script>
    function showScreen(id){
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('visible'));
      document.getElementById(id).classList.add('visible');
    }

    // ---------- Meal Tracking ----------
    let meals = JSON.parse(localStorage.getItem('meals') || '[]');
    let mealsChart = null;

    function addMeal() {
      const name = document.getElementById('mealName').value.trim();
      const portion = Number(document.getElementById('mealPortion').value || 0);
      const calories = Number(document.getElementById('mealCalories').value || 0);

      if (!name || portion <= 0 || calories <= 0) {
        alert("Please fill in meal name, portion, and calories.");
        return;
      }

      const today = new Date().toISOString().slice(0, 10);
      meals.push({ date: today, name, portion, calories });
      localStorage.setItem('meals', JSON.stringify(meals));
      refreshMealsUI();

      document.getElementById('mealName').value = '';
      document.getElementById('mealPortion').value = '';
      document.getElementById('mealCalories').value = '';
    }

    function removeMeal(name) {
      meals = meals.filter(m => m.name !== name);
      localStorage.setItem('meals', JSON.stringify(meals));
      refreshMealsUI();
    }

    function refreshMealsUI() {
      const today = new Date().toISOString().slice(0, 10);
      const todayMeals = meals.filter(m => m.date === today);
      const totalCalories = todayMeals.reduce((a, b) => a + b.calories, 0);
      const totalPortions = todayMeals.reduce((a, b) => a + b.portion, 0);

      document.getElementById('todayCalories').textContent = totalCalories;
      document.getElementById('todayPortions').textContent = totalPortions;

      const mealList = document.getElementById('mealList');
      mealList.innerHTML = '';
      todayMeals.forEach(m => {
        const item = document.createElement('div');
        item.className = 'todo-item';
        item.innerHTML = `
          <span>${m.name}: ${m.portion}g/ml ‚Ä¢ ${m.calories} kcal</span>
          <button onclick="removeMeal('${m.name}')">Delete</button>`;
        mealList.prepend(item);
      });

      updateMealsChart(todayMeals);
    }

    function updateMealsChart(todayMeals) {
      const ctx = document.getElementById('mealsChart').getContext('2d');
      const labels = todayMeals.map(m => m.name);
      const data = todayMeals.map(m => m.calories);

      if (mealsChart) {
        mealsChart.data.labels = labels;
        mealsChart.data.datasets[0].data = data;
        mealsChart.update();
      } else {
        mealsChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: labels,
            datasets: [{
              label: 'Calories',
              data: data,
              backgroundColor: '#667eea'
            }]
          },
          options: {
            scales: { y: { beginAtZero: true } },
            plugins: { legend: { display: false } }
          }
        });
      }
    }

    const foodTips = [
      "Eat more whole grains.","Include fruits and veggies daily.","Stay hydrated.",
      "Avoid sugary drinks.","Choose lean proteins.","Snack on nuts in moderation.",
      "Limit processed foods.","Cook more at home.","Avoid skipping breakfast.",
      "Control portion sizes.","Choose grilled over fried.","Eat colorful foods.",
      "Plan meals ahead.","Read nutrition labels.","Use olive oil instead of butter.",
      "Add beans and legumes.","Try meatless days.","Limit salt intake.",
      "Opt for low-fat dairy.","Avoid late-night eating.","Eat slowly and mindfully.",
      "Don‚Äôt shop hungry.","Replace chips with fruit.","Stay consistent with meal times.",
      "Balance each plate: protein, carbs, fiber.","Use herbs instead of sauces.",
      "Limit red meat.","Drink water before meals.","Avoid ultra-processed snacks.",
      "Pack healthy lunches.","Enjoy cheat meals in moderation.","Choose brown rice over white.",
      "Add avocados for healthy fat.","Avoid energy drinks.","Try fermented foods.",
      "Control added sugar.","Keep healthy snacks handy.","Make half your plate vegetables.",
      "Plan for grocery shopping.","Eat fish twice a week.","Watch hidden calories in sauces.",
      "Avoid trans fats.","Track calories occasionally.","Use smaller plates.",
      "Eat together with family.","Avoid emotional eating.","Don‚Äôt overdo caffeine.",
      "Replace desserts with fruit.","Add fiber gradually.","Sleep well ‚Äî it affects appetite.",
      "Move after eating ‚Äî light walk helps."
    ];

    function toggleTips() {
      const box = document.getElementById('tipsContainer');
      if (box.style.display === 'block') {
        box.style.display = 'none';
        box.innerHTML = '';
      } else {
        box.style.display = 'block';
        box.innerHTML = foodTips.map(t => <div>‚Ä¢ ${t}</div>).join('');
      }
    }

    window.addEventListener('load', refreshMealsUI);
  </script>
</body>
</html>
